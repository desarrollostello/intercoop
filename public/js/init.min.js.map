{"version":3,"sources":["init.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"init.min.js","sourcesContent":["/**\n * Created by ma3xcodes on 13/08/16.\n */\nvar base_url = window.location.origin + \"/\";\n$(function(){\n    var _token = $('#application-token').data('token');\n\n    var timelineBlocks = $('.cd-timeline-block'),\n        offset = 0.8;\n\n    //hide timeline blocks which are outside the viewport\n    hideBlocks(timelineBlocks, offset);\n\n    //on scolling, show/animate timeline blocks when enter the viewport\n    $(window).on('scroll', function(){\n        (!window.requestAnimationFrame)\n            ? setTimeout(function(){ showBlocks(timelineBlocks, offset); }, 100)\n            : window.requestAnimationFrame(function(){ showBlocks(timelineBlocks, offset); });\n    });\n\n    function hideBlocks(blocks, offset) {\n        blocks.each(function(){\n            ( $(this).offset().top > $(window).scrollTop()+$(window).height()*offset ) && $(this).find('.cd-timeline-img, .cd-timeline-content').addClass('is-hidden');\n        });\n    }\n\n    function showBlocks(blocks, offset) {\n        blocks.each(function(){\n            ( $(this).offset().top <= $(window).scrollTop()+$(window).height()*offset && $(this).find('.cd-timeline-img').hasClass('is-hidden') ) && $(this).find('.cd-timeline-img, .cd-timeline-content').removeClass('is-hidden').addClass('animated bounceIn');\n        });\n    }\n\n    $('.slider').slider({full_width: true, height: 200});\n    //$('.recomended-users > p').pushpin({ top: $('.container.row').offset().top });\n\t$('.button-collapse').sideNav({\n      menuWidth: 300, // Default is 240\n      edge: 'left', // Choose the horizontal origin\n      closeOnClick: true // Closes side-nav on <a> clicks, useful for Angular/Meteor\n    });\n    $('#birthday').datepicker({\n       // selectMonths: true, // Creates a dropdown to control month\n       // selectYears: 15 // Creates a dropdown of 15 years to control year\n        format: 'yyyy-mm-dd'\n    });\n    $('.collapsible').collapsible({\n        accordion : false // A setting that changes the collapsible behavior to expandable instead of the default accordion style\n    });\n    $('.tooltipped').tooltip({delay:50,html:true});\n    $(document).on('click', '.dropdown-button', function(e){\n        var element = $(this);\n        element.dropdown();\n        e.preventDefault();\n    });\n    $('.show-messages, .show-notifies').dropdown({\n        constrain_width: false,\n        belowOrigin: false\n    });\n    $('select').material_select();\n    $('select').change(function(){\n        $(this).parent('.select-wrapper').children('.select-dropdown').addClass('add-text-black-color');\n    });\n    \n    $(document).on('change','.birth_month, .birth_year',function(){\n        setSelectDays(null);\n        console.log('Birth changed');\n    });\n\n    $('.show-login-form').click(function(){\n    \tvar element = $('form.form-signup');\n    \telement.fadeOut().next().delay(450).fadeIn();\n    \t$('.button-collapse').sideNav('hide');\n    \treturn false;\n    });\n    $('.show-signup-form').click(function(){\n    \tvar element = $('form.form-login');\n    \telement.fadeOut().prev().delay(450).fadeIn();\n    \t$('.button-collapse').sideNav('hide');\n    \treturn false;\n    });\n    $('.change-lang').click(function(){\n        $.ajax({\n            url:    base_url + \"getajax/change-lang\",\n            type:   \"GET\"\n        })\n        .done(function(data){\n            $('#main-modal').html(data).openModal();\n        })\n        .statusCode(statusCodes());\n    });\n    $('.forgot-password').click(function(e){\n        $.ajax({\n            url:    base_url + \"getajax/recovery-passwod\",\n            type:   \"GET\",\n            data:   {}\n        })\n        .done(function(data){\n            $('#main-modal').html(data).openModal();\n        })\n        .statusCode(statusCodes());\n        e.preventDefault();\n    });\n\n    var setSelectDays = function(value){\n        var year_element = $('select.birth_year option:selected');\n        var month_element = $('select.birth_month option:selected');\n        var day_element = $('select.birth_day');\n        var month_days = daysOfMonth(month_element.val(), year_element.val());\n\n        day_element.empty();\n        for(var i=1;i<=month_days;i++){\n            day_element.append('<option value=\"'+i+'\">'+i+'</option>');\n        }\n        day_element.material_select();\n    };\n    var daysOfMonth = function(month, year){\n        //return new Date(year, month, 0).getDate();\n        var y = year;\n        var m = month;\n        var days = new Date(y,m,1,-1).getDate();\n        return days; \n    };\n    $('select.birth_month option').each(function() {\n        if($(this).is(':selected')){\n            setSelectDays(null);\n        }\n    });\n\n    //Show ajax modal of photos\n    $(document).on('click','.show-photo',function(){\n        var modal = $('#main-modal');\n        var element = $(this);\n        $.ajax({\n            url: element.attr('href'),\n            type: 'GET',\n            data: {_phot_id:element.data('photo-id')},\n            beforeSend: function(){\n                $('.spinner-icon-hidden').removeClass('hidden-block');\n            },\n            success: function(data){\n                modal.addClass('full-modal');\n                if(modal.is(':visible')){\n                    modal.closeModal();\n                    setTimeout(function(){\n                        $('.spinner-icon-hidden').addClass('hidden-block');\n                        modal.html(data).openModal({\n                            complete: function(){ modal.removeClass('full-modal') }\n                        });\n                    },1000);\n                }else{\n                    $('.spinner-icon-hidden').addClass('hidden-block');\n                    modal.html(data).openModal({\n                        complete: function(){ modal.removeClass('full-modal') }\n                    });\n                }\n            }\n        }).statusCode(statusCodes());\n\n        return false;\n    });\n\n    //Show modal for create a post\n    $(document).on('click','.menu-item-new-post',function(){\n        var modal = $('#main-modal');\n        var element = $(this);\n        $.ajax({\n            url: element.attr('href'),\n            type: 'GET',\n            data: {},\n            beforeSend: function(){\n                $('.spinner-icon-hidden').removeClass('hidden-block');\n            },\n            success: function(data){\n                $('.spinner-icon-hidden').addClass('hidden-block');\n                $('.change-nav').removeClass('navbar-fixed');\n                modal.html(data).openModal({\n                    starting_top: '40%',\n                    ready: function(){\n                        //\n                        $(document).on('click','.post-dropdown-button', function(){\n                            element = $(this);\n                            element.dropdown({\n                                gutter: 40,\n                                beloworigin: true\n                            });\n                        });\n                    },\n                    complete: function() { $('.change-nav').addClass('navbar-fixed'); }\n                });\n            }\n        }).statusCode(statusCodes());\n        return false;\n    });\n\n    $(document).on('submit','.new-state',function(e){\n        var element = $(this);\n        $.ajax({\n            url: element.attr('action'),\n            type: 'POST',\n            data: element.serialize(),\n            beforeSend: function(){\n                $('.spinner-icon-hidden').removeClass('hidden-block');\n            },\n            success: function(data){\n                $('.spinner-icon-hidden').addClass('hidden-block');\n                if(typeof data == 'object'){\n                    if(data.status=='success'){\n                        $('#new-post').val('');\n                        $('#main-modal').closeModal();\n                        var $toastContent = $('<div class=\"green lighten-1\">'+data.message+'</div>');\n                    }else{\n                        var $toastContent = $('<div class=\"red lighten-1\">'+data.message+'</div>');\n                    }\n                }\n                Materialize.toast($toastContent, 4000);\n            }\n        }).statusCode(statusCodes());\n        e.preventDefault();\n    });\n    $(document).on('click','.add-photos', function(){\n        var modal = $('#main-modal');\n        var element = $(this);\n        $.ajax({\n            url: base_url + \"getajax/newphoto\",\n            beforeSend: function(){\n                $('.spinner-icon-hidden').removeClass('hidden-block');\n            },\n            success: function(data){\n                $('.spinner-icon-hidden').addClass('hidden-block');\n                $('.change-nav').removeClass('navbar-fixed');\n                modal.html(data).openModal({\n                    starting_top: '40%',\n                    ready: function(){\n                        //\n                        $(document).on('click','.post-dropdown-button', function(){\n                            element = $(this);\n                            element.dropdown({\n                                gutter: 40,\n                                beloworigin: true\n                            });\n                        });\n                    },\n                    complete: function() { $('.change-nav').addClass('navbar-fixed'); }\n                });\n            }\n        }).statusCode(statusCodes());\n    });\n    $(document).on('submit','.new-photo',function(e){\n        var element = $(this);\n\n        var file_data = $('#photo-upload').prop('files')[0];\n        var form_data = new FormData();\n        form_data.append('file_name', file_data);\n        form_data.append('privacy', element.find('input[name=\"privacy\"]:checked').val());\n        console.log(form_data);\n        console.log(element.find('input[name=\"privacy\"]:checked').val());\n        $.ajax({\n            url: element.attr('action'),\n            type: 'POST',\n            cache: false,\n            contentType: false,\n            processData: false,\n            data: form_data,\n            headers:  {\n                \"X-CSRF-TOKEN\": $('#application-token').data('token')\n            },\n            beforeSend: function(){\n                $('.spinner-icon-hidden').removeClass('hidden-block');\n            },\n            success: function(data){\n                $('.spinner-icon-hidden').addClass('hidden-block');\n                if(typeof data == 'object'){\n                    if(data.status=='success'){\n                        $('#new-post').val('');\n                        $('#main-modal').closeModal();\n                        var $toastContent = $('<div class=\"green lighten-1\"><!--<img src=\"'+data.small+'\" width=\"200\">--> <span class=\"white-text\">Your photo is uploadded</span></div>');\n                    }else{\n                        var $toastContent = $('<div class=\"red lighten-1\">'+data.message+'</div>');\n                    }\n                }\n                Materialize.toast($toastContent, 4000);\n            }\n        }).statusCode(statusCodes());\n        e.preventDefault();\n    });\n    $(document).on('click','.button-delete-profile-button',function(e){\n        var element = $(this);\n        var data = {\n            _token: $('#application-token').data('token'),\n            photo: element.data('photo')\n        };\n        console.log(data);\n        $.ajax({\n            url: base_url + 'postajax/deletephoto',\n            type: 'POST',\n            data: data,\n            beforeSend: function(){\n                $('.spinner-icon-hidden').removeClass('hidden-block');\n            },\n            success: function(data){\n                $('.spinner-icon-hidden').addClass('hidden-block');\n                if(typeof data == 'object'){\n                    if(data.status=='success'){\n                        var $toastContent = $('<div class=\"green lighten-1\">'+data.message+'</div>');\n                        var parent = element.parent('div');\n                        parent.addClass('bounceOut');\n                        setTimeout(function(){\n                            parent.remove();\n                        },750);\n                    }else{\n                        var $toastContent = $('<div class=\"red lighten-1\">'+data.message+'</div>');\n                    }\n                    Materialize.toast($toastContent, 4000);\n                }else{\n                    console.log(data);\n                }\n            }\n        }).statusCode(statusCodes());\n        e.preventDefault();\n    });\n    $(document).on('change',\"#photo-upload\", function () {\n\n        if (typeof (FileReader) != \"undefined\") {\n            var image_holder = $(\".image-holder\");\n            image_holder.empty();\n\n            var reader = new FileReader();\n            reader.onload = function (e) {\n                $(\"<img />\", {\n                    \"src\": e.target.result,\n                    \"class\": \"thumb-image\",\n                    \"style\":'max-width:240px;height:auto;'\n                }).appendTo(image_holder);\n                console.log(e);\n            };\n            image_holder.show();\n            reader.readAsDataURL($(this)[0].files[0]);\n        } else {\n            var $toastContent = $('<div class=\"red lighten-1\">This browser does not support.</div>');\n            Materialize.toast($toastContent, 4000);\n        }\n    });\n    $(document).on('submit','.profile-form-decription', function(e){\n       var element = $(this);\n       $.ajax({\n            url: element.attr('action'),\n           method: element.attr('method'),\n            data: element.serialize(),\n            beforeSend: function(){\n              element.find('button[type=\"submit\"]').addClass('disabled');\n            },\n            success: function(data) {\n                if(typeof data == 'object'){\n                    if(data.status=='success'){\n                        var $toastContent = $('<div class=\"green lighten-1\">'+data.message+'</div>');\n                    }else{\n                        var $toastContent = $('<div class=\"red lighten-1\">'+data.message+'</div>');\n                    }\n                    Materialize.toast($toastContent, 4000);\n                }\n                element.find('button[type=\"submit\"]').removeClass('disabled');\n            }\n       });\n       e.preventDefault();\n    });\n\n    $('.content-notifies-notifies').bind('scroll',function() {\n        var element = $(this);\n        var last_item = $('ul.list-notifies.notifies > li').last().data('last');\n\n        if(element.scrollTop() + element.innerHeight() >= $(this)[0].scrollHeight) {\n            $.ajax({\n                url: base_url + \"getajax/morenotifies\",\n                data: {last:last_item},\n                beforeSend: function(){\n                    $('.spinner-icon-hidden').removeClass('hidden-block');\n                },\n                success: function (data) {\n                    $('.spinner-icon-hidden').addClass('hidden-block');\n                    $('.list-notifies.notifies').append(data);\n                    console.log(data);\n                }\n            })\n        }\n    });\n\n    $(document).bind('scroll',function () {\n        if($('#timeline-content').length > 0) {\n            var doc = $(this);\n\n            var dTop = doc.scrollTop();\n            var wHeight = $(window).height() - 616;\n            var content_articles = $('#timeline-content');\n            if (dTop >= wHeight) {\n                data = {\n                    last: content_articles.find('article').last().data('article')\n                };\n                $.ajax({\n                    url: base_url + 'getajax/morefeeds',\n                    data: data,\n                    beforeSend: function () {\n                        $('body').css('overflow','hidden');\n                        $('#feed-content-spinner').toggle();\n                    },\n                    success: function (data) {\n                        if(typeof data == 'object'){\n                            if(data.status=='success'){\n                                var $toastContent = $('<div class=\"green lighten-1\">'+data.message+'</div>');\n                            }else{\n                                var $toastContent = $('<div class=\"red lighten-1\">'+data.message+'</div>');\n                            }\n                            Materialize.toast($toastContent, 4000);\n                        }else{\n                            $('#my-timeline').append(data);\n                            $('.aside-left-menu > div').pushpin({\n                                top: 64,\n                                bottom: $('.container.row').height() - $('.page-footer').height(),\n                                offset: 64\n                            });\n                        }\n                        $('#feed-content-spinner').toggle();\n                        $('body').removeAttr('style');\n                    }\n                }).statusCode(statusCodes());\n            }\n        }\n    });\n\n    $('.list-item-notification > a.element-of-message').click(function(e){\n        var element = $(this);\n        var insert_content = element.siblings();\n        if($('.content-notifies-messages').is(':hidden')){\n            console.log('Hidden');\n            return false;\n        }\n        $.ajax({\n            url: base_url + 'getajax/firstmessages',\n            type: 'GET',\n            beforeSend: function () {\n\n            },\n            success: function (data) {\n                insert_content.children('ul').html(data);\n                $('.icon-message-count-notifications').text('');\n            }\n        }).statusCode(statusCodes());\n        e.preventDefault();\n    });\n    $('.list-item-notification > a.element-of-notification').click(function(e){\n        var element = $(this);\n        var insert_content = element.siblings();\n        if(insert_content.is(':hidden')){\n            console.log('Hidden');\n            return false;\n        }\n        $.ajax({\n            url: base_url + 'getajax/firstnotifies',\n            type: 'GET',\n            beforeSend: function () {\n\n            },\n            success: function (data) {\n                insert_content.children('ul').html(data);\n                $('.icon-count-notifies').text('');\n                /*var last_ele = $('.value-notif');\n                $.each(last_ele, function(i, v){\n                    console.log(v);\n\n                    //$clamp(v, {clamp: 2, useNativeClamp: false});\n                });\n                $clamp(insert_content.children('ul').children('li'), {clamp: 2, useNativeClamp: false});*/\n            }\n        }).statusCode(statusCodes());\n\n        e.preventDefault();\n    });\n\n    $('.morefeedcomments').click(function(e){\n        var element = $(this);\n        var content = element.data('comments');\n        var last_comment = $('.'+content+' > .comment-last').last();\n        data = {\n            last:last_comment.data('last'),\n            type:element.data('type'),\n            object:element.data('object')\n        };\n        console.log(data);\n\n        $.ajax({\n            url: base_url + 'getajax/morefeedcomments',\n            data: data,\n            beforeSend: function(){\n                \n            },\n            success: function(data){\n                //console.log(data);\n                if(typeof data == \"object\"){\n                    if(data.status=='success') {\n                        var $toastContent = $('<div class=\"orange lighten-1\">' + data.message + '</div>');\n                    }else{\n                        var $toastContent = $('<div class=\"red lighten-1\">' + data.message + '</div>');\n                    }\n                    Materialize.toast($toastContent, 4000);\n                    element.toggle();\n                }else {\n                    $('.' + content).append(data);\n                }\n            }\n        }).statusCode(statusCodes());\n        e.preventDefault();\n    });\n    $('.aside-left-menu > div').pushpin({\n        bottom: $('.container.row').height() - $('.page-footer').height(),\n        offset: 64\n    });\n    //Set and get checkbox sound state\n    $('#chat-sound-control').change(function () {\n        var element = $(this);\n        if(element.is(':checked')){\n            window.localStorage.setItem('chat-sound-control', 'checked');\n        }else{\n            window.localStorage.setItem('chat-sound-control', '');\n        }\n        console.log(element.val());\n    });\n    if(window.localStorage.getItem('chat-sound-control')!=''&&window.localStorage.getItem('chat-sound-control')!=undefined){\n        $('#chat-sound-control').attr( 'checked', window.localStorage.getItem('chat-sound-control') )\n    }\n});\nstatusCodes = function(){\n    return {\n        404: function(){\n            console.log(\"Error 404\");\n            var $toastContent = $('<div class=\"orange lighten-1\">Page not found</div>');\n            Materialize.toast($toastContent, 4000);\n        },\n        405: function(){\n            console.log(\"Error 405\");\n            var $toastContent = $('<div class=\"red lighten-1\">Method Not Allowed</div>');\n            Materialize.toast($toastContent, 4000);\n        },\n        401: function(){\n            console.log(\"Error 401\");\n            var $toastContent = $('<div class=\"orange lighten-1\">Unautorized</div>');\n            Materialize.toast($toastContent, 4000);\n        },\n        402: function(){\n            console.log('Error 402');\n            var $toastContent = $('<div class=\"orange lighten-1\">Please first login.</div>');\n            Materialize.toast($toastContent, 4000);\n            setTimeout(function(){\n                window.location.reload();\n            },4001);\n        },\n        1000: function(){\n            //Personalizes arror\n            alert('First sigin please.');\n        },\n        500: function(){\n            console.log(\"Error 500\");\n            var $toastContent = $('<div class=\"red lighten-1\">Internal server error.</div>');\n            Materialize.toast($toastContent, 4000);\n        },\n        503: function(){\n            console.log(\"Error 503\");\n        }\n    }\n};"]}