var base_url=window.location.origin+"/";$(function(){function e(e,t){e.each(function(){$(this).offset().top>$(window).scrollTop()+$(window).height()*t&&$(this).find(".cd-timeline-img, .cd-timeline-content").addClass("is-hidden")})}function t(e,t){e.each(function(){$(this).offset().top<=$(window).scrollTop()+$(window).height()*t&&$(this).find(".cd-timeline-img").hasClass("is-hidden")&&$(this).find(".cd-timeline-img, .cd-timeline-content").removeClass("is-hidden").addClass("animated bounceIn")})}var n=($("#application-token").data("token"),$(".cd-timeline-block")),a=.8;e(n,a),$(window).on("scroll",function(){window.requestAnimationFrame?window.requestAnimationFrame(function(){t(n,a)}):setTimeout(function(){t(n,a)},100)}),$(".slider").slider({full_width:!0,height:200}),$(".button-collapse").sideNav({menuWidth:300,edge:"left",closeOnClick:!0}),$("#birthday").datepicker({format:"yyyy-mm-dd"}),$(".collapsible").collapsible({accordion:!1}),$(".tooltipped").tooltip({delay:50,html:!0}),$(document).on("click",".dropdown-button",function(e){var t=$(this);t.dropdown(),e.preventDefault()}),$(".show-messages, .show-notifies").dropdown({constrain_width:!1,belowOrigin:!1}),$("select").material_select(),$("select").change(function(){$(this).parent(".select-wrapper").children(".select-dropdown").addClass("add-text-black-color")}),$(document).on("change",".birth_month, .birth_year",function(){i(null)}),$(".show-login-form").click(function(){var e=$("form.form-signup");return e.fadeOut().next().delay(450).fadeIn(),$(".button-collapse").sideNav("hide"),!1}),$(".show-signup-form").click(function(){var e=$("form.form-login");return e.fadeOut().prev().delay(450).fadeIn(),$(".button-collapse").sideNav("hide"),!1}),$(".change-lang").click(function(){$.ajax({url:base_url+"getajax/change-lang",type:"GET"}).done(function(e){$("#main-modal").html(e).openModal()}).statusCode(statusCodes())}),$(".forgot-password").click(function(e){$.ajax({url:base_url+"getajax/recovery-passwod",type:"GET",data:{}}).done(function(e){$("#main-modal").html(e).openModal()}).statusCode(statusCodes()),e.preventDefault()});var i=function(e){var t=$("select.birth_year option:selected"),n=$("select.birth_month option:selected"),a=$("select.birth_day"),i=o(n.val(),t.val());a.empty();for(var s=1;s<=i;s++)a.append('<option value="'+s+'">'+s+"</option>");a.material_select()},o=function(e,t){var n=t,a=e,i=new Date(n,a,1,(-1)).getDate();return i};$("select.birth_month option").each(function(){$(this).is(":selected")&&i(null)}),$(document).on("click",".show-photo",function(){var e=$("#main-modal"),t=$(this);return $.ajax({url:t.attr("href"),type:"GET",data:{_phot_id:t.data("photo-id")},beforeSend:function(){$(".spinner-icon-hidden").removeClass("hidden-block")},success:function(t){if(e.closeModal(),"object"==typeof t){if($(".spinner-icon-hidden").addClass("hidden-block"),"success"==t.status)var n=$('<div class="green lighten-1">'+t.message+"</div>");else var n=$('<div class="red lighten-1">'+t.message+"</div>");Materialize.toast(n,4e3)}else e.addClass("full-modal"),e.html(t),setTimeout(function(){$(".spinner-icon-hidden").addClass("hidden-block"),e.openModal({complete:function(){e.removeClass("full-modal")}})},1e3)}}).statusCode(statusCodes()),!1}),$(document).on("click",".menu-item-new-post",function(){var e=$("#main-modal"),t=$(this);return $.ajax({url:t.attr("href"),type:"GET",data:{},beforeSend:function(){$(".spinner-icon-hidden").removeClass("hidden-block")},success:function(n){$(".spinner-icon-hidden").addClass("hidden-block"),$(".change-nav").removeClass("navbar-fixed"),e.html(n).openModal({starting_top:"40%",ready:function(){$(document).on("click",".post-dropdown-button",function(){t=$(this),t.dropdown({gutter:40,beloworigin:!0})})},complete:function(){$(".change-nav").addClass("navbar-fixed")}})}}).statusCode(statusCodes()),!1}),$(document).on("submit",".new-state",function(e){var t=$(this);$.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),beforeSend:function(){$(".spinner-icon-hidden").removeClass("hidden-block")},success:function(e){if($(".spinner-icon-hidden").addClass("hidden-block"),"object"==typeof e)if("success"==e.status){$("#new-post").val(""),$("#main-modal").closeModal();var t=$('<div class="green lighten-1">'+e.message+"</div>")}else var t=$('<div class="red lighten-1">'+e.message+"</div>");Materialize.toast(t,4e3)}}).statusCode(statusCodes()),e.preventDefault()}),$(document).on("click",".add-photos",function(){var e=$("#main-modal"),t=$(this);$.ajax({url:base_url+"getajax/newphoto",beforeSend:function(){$(".spinner-icon-hidden").removeClass("hidden-block")},success:function(n){$(".spinner-icon-hidden").addClass("hidden-block"),$(".change-nav").removeClass("navbar-fixed"),e.html(n).openModal({starting_top:"40%",ready:function(){$(document).on("click",".post-dropdown-button",function(){t=$(this),t.dropdown({gutter:40,beloworigin:!0})})},complete:function(){$(".change-nav").addClass("navbar-fixed")}})}}).statusCode(statusCodes())}),$(document).on("submit",".new-photo",function(e){var t=$(this),n=$("#photo-upload").prop("files")[0],a=new FormData;a.append("file_name",n),a.append("privacy",t.find('input[name="privacy"]:checked').val()),$.ajax({url:t.attr("action"),type:"POST",cache:!1,contentType:!1,processData:!1,data:a,headers:{"X-CSRF-TOKEN":$("#application-token").data("token")},beforeSend:function(){$(".spinner-icon-hidden").removeClass("hidden-block")},success:function(e){if($(".spinner-icon-hidden").addClass("hidden-block"),"object"==typeof e)if("success"==e.status){$("#new-post").val(""),$("#main-modal").closeModal();var t=$('<div class="green lighten-1"><!--<img src="'+e.small+'" width="200">--> <span class="white-text">Your photo is uploadded</span></div>')}else var t=$('<div class="red lighten-1">'+e.message+"</div>");Materialize.toast(t,4e3)}}).statusCode(statusCodes()),e.preventDefault()}),$(document).on("click",".button-delete-profile-photo",function(e){var t=$(this),n={_token:$("#application-token").data("token"),photo:t.data("photo")};$.ajax({url:base_url+"postajax/deletephoto",type:"POST",data:n,beforeSend:function(){$(".spinner-icon-hidden").removeClass("hidden-block")},success:function(e){if($(".spinner-icon-hidden").addClass("hidden-block"),"object"==typeof e){if("success"==e.status){var n=$('<div class="green lighten-1">'+e.message+"</div>"),a=t.parent("div");a.addClass("bounceOut"),setTimeout(function(){a.remove()},750)}else var n=$('<div class="red lighten-1">'+e.message+"</div>");Materialize.toast(n,4e3)}}}).statusCode(statusCodes()),e.preventDefault()}),$(document).on("click",".button-edit-profile-button",function(e){var t=$("#main-modal"),n=$(this);$.ajax({url:base_url+"getajax/editphoto",data:{photo:n.data("photo")},beforeSend:function(){$(".spinner-icon-hidden").removeClass("hidden-block"),n.attr("disabled","").addClass("disabled")},success:function(e){if($(".spinner-icon-hidden").addClass("hidden-block"),n.removeAttr("disabled").removeClass("disabled"),"object"==typeof e){if("success"==e.status)var a=$('<div class="green lighten-1">'+e.message+"</div>");else var a=$('<div class="red lighten-1">'+e.message+"</div>");Materialize.toast(a,4e3)}else t.html(e).openModal({starting_top:"40%",complete:function(){$(".change-nav").addClass("navbar-fixed")}})}}).statusCode(statusCodes()),e.preventDefault()}),$(document).on("change","#define-avatar-box",function(){var e=$(this);e.is(":checked")&&$("#public-privacy").click()}),$(document).on("change","#justme-privacy",function(){var e=$(this);e.is(":checked")&&$("#define-avatar-box").removeAttr("checked")}),$(document).on("submit",".form-edit-photo",function(e){var t=$("#main-modal"),n=$(this),a=n.find('button[type="submit"]'),i=n.find('input[name="is_avatar"]');$.ajax({url:n.attr("action"),type:"POST",data:n.serialize(),beforeSend:function(){$(".spinner-icon-hidden").removeClass("hidden-block"),a.attr("disabled","").addClass("disabled")},success:function(e){if($(".spinner-icon-hidden").addClass("hidden-block"),a.removeAttr("disabled").removeClass("disabled"),"object"==typeof e)if("success"==e.status){t.closeModal(),i.is(":checked")&&($(".circle.profile-avatar-small").attr("src",e.small).addClass("animated bounceIn"),$(".circle.profile-avatar-large").attr("src",e.large).addClass("animated bounceIn"));var n=$('<div class="green lighten-1">'+e.message+"</div>")}else var n=$('<div class="red lighten-1">'+e.message+"</div>");else var n=$('<div class="red lighten-1">Unknown error.</div>');Materialize.toast(n,4e3)}}),e.preventDefault()}),$(document).on("change","#photo-upload",function(){if("undefined"!=typeof FileReader){var e=$(".image-holder");e.empty();var t=new FileReader;t.onload=function(t){$("<img />",{src:t.target.result,"class":"thumb-image",style:"max-width:240px;height:auto;"}).appendTo(e)},e.show(),t.readAsDataURL($(this)[0].files[0])}else{var n=$('<div class="red lighten-1">This browser does not support.</div>');Materialize.toast(n,4e3)}}),$(document).on("submit",".profile-form-decription",function(e){var t=$(this);$.ajax({url:t.attr("action"),method:t.attr("method"),data:t.serialize(),beforeSend:function(){t.find('button[type="submit"]').addClass("disabled")},success:function(e){if("object"==typeof e){if("success"==e.status)var n=$('<div class="green lighten-1">'+e.message+"</div>");else var n=$('<div class="red lighten-1">'+e.message+"</div>");Materialize.toast(n,4e3)}t.find('button[type="submit"]').removeClass("disabled")}}),e.preventDefault()}),$(".content-notifies-notifies").bind("scroll",function(){var e=$(this),t=$("ul.list-notifies.notifies > li").last().data("last");e.scrollTop()+e.innerHeight()>=$(this)[0].scrollHeight&&$.ajax({url:base_url+"getajax/morenotifies",data:{last:t},beforeSend:function(){$(".spinner-icon-hidden").removeClass("hidden-block")},success:function(e){$(".spinner-icon-hidden").addClass("hidden-block"),$(".list-notifies.notifies").append(e)}})}),$(window).scroll(function(e){if($("#timeline-content").length>0){var t=$(document),n=t.scrollTop(),a=$(window).height()-616,i=$("#timeline-content"),o=i.find("article").last().data("article");if(!o)return!1;n>=a&&(data={last:o},$.ajax({url:base_url+"getajax/morefeeds",data:data,beforeSend:function(){$("body").css("overflow","hidden"),$("#feed-content-spinner").toggle()},success:function(e){if("object"==typeof e){if("success"==e.status)var t=$('<div class="green lighten-1">'+e.message+"</div>");else var t=$('<div class="red lighten-1">'+e.message+"</div>");Materialize.toast(t,4e3)}else $("#my-timeline").append(e),$(".aside-left-menu > div").pushpin({top:64,bottom:$(".container.row").height()-$(".page-footer").height(),offset:64});$("#feed-content-spinner").toggle(),$("body").removeAttr("style")}}).statusCode(statusCodes()))}}),$(".list-item-notification > a.element-of-message").click(function(e){var t=$(this),n=t.siblings();return!$(".content-notifies-messages").is(":hidden")&&($.ajax({url:base_url+"getajax/firstmessages",type:"GET",beforeSend:function(){},success:function(e){n.children("ul").html(e),$(".icon-message-count-notifications").text("")}}).statusCode(statusCodes()),void e.preventDefault())}),$(".list-item-notification > a.element-of-notification").click(function(e){var t=$(this),n=t.siblings();return!n.is(":hidden")&&($.ajax({url:base_url+"getajax/firstnotifies",type:"GET",beforeSend:function(){},success:function(e){n.children("ul").html(e),$(".icon-count-notifies").text("")}}).statusCode(statusCodes()),void e.preventDefault())}),$(document).on("click",".morefeedcomments",function(e){var t=$(this),n=t.data("comments"),a=$("."+n+" > .comment-last").last();return data={last:a.data("last"),type:t.data("type"),object:t.data("object")},$.ajax({url:base_url+"getajax/morefeedcomments",data:data,beforeSend:function(){},success:function(e){if("object"==typeof e){if("success"==e.status)var a=$('<div class="orange lighten-1">'+e.message+"</div>");else var a=$('<div class="red lighten-1">'+e.message+"</div>");Materialize.toast(a,4e3),t.toggle()}else $("."+n).append(e)}}).statusCode(statusCodes()),e.preventDefault(),!1}),$(".aside-left-menu > div").pushpin({bottom:$(".container.row").height()-$(".page-footer").height(),offset:64}),$("#chat-sound-control").change(function(){var e=$(this);e.is(":checked")?window.localStorage.setItem("chat-sound-control","checked"):window.localStorage.setItem("chat-sound-control","")}),""!=window.localStorage.getItem("chat-sound-control")&&void 0!=window.localStorage.getItem("chat-sound-control")&&$("#chat-sound-control").attr("checked",window.localStorage.getItem("chat-sound-control"))}),statusCodes=function(){return{404:function(){var e=$('<div class="orange lighten-1">Page not found</div>');Materialize.toast(e,4e3)},405:function(){var e=$('<div class="red lighten-1">Method Not Allowed</div>');Materialize.toast(e,4e3)},401:function(){var e=$('<div class="orange lighten-1">Unautorized</div>');Materialize.toast(e,4e3)},402:function(){var e=$('<div class="orange lighten-1">Please first login.</div>');Materialize.toast(e,4e3),setTimeout(function(){window.location.reload()},4001)},1e3:function(){alert("First sigin please.")},500:function(){var e=$('<div class="red lighten-1">Internal server error.</div>');Materialize.toast(e,4e3)},503:function(){}}};